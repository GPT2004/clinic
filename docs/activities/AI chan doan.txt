<svg viewBox="0 0 900 1400" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="450" y="30" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">
    Biểu đồ hoạt động Bác sĩ sử dụng AI chẩn đoán bệnh
  </text>
  
  <!-- Swimlanes -->
  <rect x="50" y="60" width="800" height="1280" fill="none" stroke="#333" stroke-width="2"/>
  <line x1="350" y1="60" x2="350" y2="1340" stroke="#333" stroke-width="2"/>
  <line x1="650" y1="60" x2="650" y2="1340" stroke="#333" stroke-width="2"/>
  
  <!-- Swimlane Headers -->
  <rect x="50" y="60" width="300" height="40" fill="#f0f0f0" stroke="#333" stroke-width="1"/>
  <rect x="350" y="60" width="300" height="40" fill="#f0f0f0" stroke="#333" stroke-width="1"/>
  <rect x="650" y="60" width="200" height="40" fill="#f0f0f0" stroke="#333" stroke-width="1"/>
  
  <text x="200" y="85" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Bác sĩ</text>
  <text x="500" y="85" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Hệ thống</text>
  <text x="750" y="85" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">AI Service</text>
  
  <!-- Start node -->
  <circle cx="200" cy="130" r="12" fill="#000"/>
  
  <!-- Đang khám bệnh nhân -->
  <rect x="110" y="170" width="180" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="200" y="195" font-family="Arial" font-size="12" text-anchor="middle">Đang khám bệnh nhân</text>
  <line x1="200" y1="142" x2="200" y2="170" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <line x1="200" y1="210" x2="200" y2="250" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Nhập chỉ số lâm sàng -->
  <rect x="90" y="250" width="220" height="60" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="200" y="270" font-family="Arial" font-size="11" text-anchor="middle">Nhập chỉ số lâm sàng:</text>
  <text x="200" y="285" font-family="Arial" font-size="10" text-anchor="middle">Tuổi, BMI, Huyết áp, Đường huyết,</text>
  <text x="200" y="300" font-family="Arial" font-size="10" text-anchor="middle">Cholesterol, Triệu chứng...</text>
  
  <line x1="200" y1="310" x2="200" y2="350" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Chọn loại dự đoán -->
  <rect x="105" y="350" width="190" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="200" y="375" font-family="Arial" font-size="12" text-anchor="middle">Chọn loại dự đoán bệnh</text>
  
  <line x1="200" y1="390" x2="200" y2="430" stroke="#E91E63" stroke-width="2"/>
  
  <!-- Decision - Loại bệnh? -->
  <path d="M 200 430 L 260 490 L 200 550 L 140 490 Z" fill="#FFE082" stroke="#F57C00" stroke-width="2"/>
  <text x="200" y="485" font-family="Arial" font-size="10" text-anchor="middle">Loại bệnh?</text>
  
  <!-- Tiểu đường path -->
  <text x="90" y="495" font-family="Arial" font-size="10" fill="#666">Tiểu đường</text>
  <line x1="140" y1="490" x2="70" y2="490" stroke="#E91E63" stroke-width="2"/>
  <line x1="70" y1="490" x2="70" y2="600" stroke="#E91E63" stroke-width="2"/>
  <line x1="70" y1="600" x2="200" y2="600" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Tim mạch path -->
  <text x="285" y="495" font-family="Arial" font-size="10" fill="#666">Tim mạch</text>
  <line x1="260" y1="490" x2="330" y2="490" stroke="#E91E63" stroke-width="2"/>
  <line x1="330" y1="490" x2="330" y2="600" stroke="#E91E63" stroke-width="2"/>
  <line x1="330" y1="600" x2="200" y2="600" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Nhấn nút Dự đoán -->
  <rect x="125" y="600" width="150" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="200" y="625" font-family="Arial" font-size="12" text-anchor="middle">Nhấn nút "Dự đoán"</text>
  
  <line x1="200" y1="640" x2="200" y2="670" stroke="#E91E63" stroke-width="2"/>
  <line x1="200" y1="670" x2="420" y2="670" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Validate dữ liệu -->
  <rect x="395" y="650" width="210" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="500" y="675" font-family="Arial" font-size="12" text-anchor="middle">Validate dữ liệu đầu vào</text>
  
  <line x1="500" y1="690" x2="500" y2="740" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Decision - Hợp lệ? -->
  <path d="M 500 740 L 550 790 L 500 840 L 450 790 Z" fill="#FFE082" stroke="#F57C00" stroke-width="2"/>
  <text x="500" y="785" font-family="Arial" font-size="10" text-anchor="middle">Dữ liệu</text>
  <text x="500" y="800" font-family="Arial" font-size="10" text-anchor="middle">hợp lệ?</text>
  
  <!-- No path -->
  <text x="380" y="795" font-family="Arial" font-size="11" fill="#666">Không</text>
  <line x1="450" y1="790" x2="395" y2="790" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Thông báo lỗi -->
  <rect x="395" y="770" width="60" height="60" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="425" y="792" font-family="Arial" font-size="9" text-anchor="middle">Thông báo</text>
  <text x="425" y="805" font-family="Arial" font-size="9" text-anchor="middle">lỗi thiếu</text>
  <text x="425" y="818" font-family="Arial" font-size="9" text-anchor="middle">dữ liệu</text>
  
  <!-- Loop back -->
  <line x1="395" y1="790" x2="320" y2="790" stroke="#E91E63" stroke-width="2"/>
  <line x1="320" y1="790" x2="320" y2="280" stroke="#E91E63" stroke-width="2"/>
  <line x1="320" y1="280" x2="310" y2="280" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Yes path -->
  <text x="580" y="795" font-family="Arial" font-size="11" fill="#666">Có</text>
  <line x1="550" y1="790" x2="620" y2="790" stroke="#E91E63" stroke-width="2"/>
  <line x1="620" y1="790" x2="620" y2="870" stroke="#E91E63" stroke-width="2"/>
  <line x1="620" y1="870" x2="700" y2="870" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Gọi AI API -->
  <rect x="700" y="850" width="120" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="760" y="875" font-family="Arial" font-size="12" text-anchor="middle">Gọi AI API</text>
  
  <line x1="760" y1="890" x2="760" y2="930" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Chạy mô hình ML -->
  <rect x="685" y="930" width="150" height="60" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="760" y="950" font-family="Arial" font-size="11" text-anchor="middle">Chạy mô hình ML:</text>
  <text x="760" y="965" font-family="Arial" font-size="10" text-anchor="middle">Logistic Regression /</text>
  <text x="760" y="980" font-family="Arial" font-size="10" text-anchor="middle">Random Forest</text>
  
  <line x1="760" y1="990" x2="760" y2="1030" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Tính toán xác suất -->
  <rect x="690" y="1030" width="140" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="760" y="1055" font-family="Arial" font-size="12" text-anchor="middle">Tính toán xác suất</text>
  
  <line x1="760" y1="1070" x2="760" y2="1110" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Trả về kết quả -->
  <rect x="680" y="1110" width="160" height="60" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="760" y="1130" font-family="Arial" font-size="11" text-anchor="middle">Trả về kết quả:</text>
  <text x="760" y="1145" font-family="Arial" font-size="10" text-anchor="middle">- Nguy cơ bệnh (%)</text>
  <text x="760" y="1160" font-family="Arial" font-size="10" text-anchor="middle">- Mức độ nguy hiểm</text>
  
  <line x1="680" y1="1140" x2="605" y2="1140" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Hiển thị kết quả AI -->
  <rect x="390" y="1110" width="215" height="60" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="497" y="1130" font-family="Arial" font-size="11" text-anchor="middle">Hiển thị kết quả AI:</text>
  <text x="497" y="1145" font-family="Arial" font-size="10" text-anchor="middle">- Nguy cơ tiểu đường: 78%</text>
  <text x="497" y="1160" font-family="Arial" font-size="10" text-anchor="middle">- Gợi ý: Cần xét nghiệm thêm</text>
  
  <line x1="390" y1="1140" x2="295" y2="1140" stroke="#E91E63" stroke-width="2"/>
  <line x1="295" y1="1140" x2="295" y2="1210" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Xem xét kết quả AI -->
  <rect x="95" y="1210" width="210" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="200" y="1235" font-family="Arial" font-size="12" text-anchor="middle">Xem xét & kết hợp kinh nghiệm</text>
  
  <line x1="200" y1="1250" x2="200" y2="1280" stroke="#E91E63" stroke-width="2"/>
  <line x1="200" y1="1280" x2="420" y2="1280" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Lưu kết quả vào hồ sơ -->
  <rect x="405" y="1260" width="210" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="510" y="1285" font-family="Arial" font-size="12" text-anchor="middle">Lưu kết quả AI vào hồ sơ BA</text>
  
  <!-- End node -->
  <circle cx="510" cy="1320" r="12" fill="#000"/>
  <circle cx="510" cy="1320" r="8" fill="#fff"/>
  <line x1="510" y1="1300" x2="510" y2="1308" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#E91E63" />
    </marker>
  </defs>
</svg>