<svg viewBox="0 0 800 1300" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="400" y="30" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">
    Biểu đồ hoạt động Kê đơn thuốc
  </text>
  
  <!-- Swimlanes -->
  <rect x="50" y="60" width="700" height="1180" fill="none" stroke="#333" stroke-width="2"/>
  <line x1="400" y1="60" x2="400" y2="1240" stroke="#333" stroke-width="2"/>
  
  <!-- Swimlane Headers -->
  <rect x="50" y="60" width="350" height="40" fill="#f0f0f0" stroke="#333" stroke-width="1"/>
  <rect x="400" y="60" width="350" height="40" fill="#f0f0f0" stroke="#333" stroke-width="1"/>
  
  <text x="225" y="85" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Bác sĩ</text>
  <text x="575" y="85" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Hệ thống</text>
  
  <!-- Start node -->
  <circle cx="225" cy="130" r="12" fill="#000"/>
  <line x1="225" y1="142" x2="225" y2="170" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Đang khám bệnh nhân -->
  <rect x="130" y="170" width="190" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="195" font-family="Arial" font-size="12" text-anchor="middle">Đang khám/xem hồ sơ BA</text>
  <line x1="225" y1="210" x2="225" y2="250" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Chọn Tạo đơn thuốc -->
  <rect x="145" y="250" width="160" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="275" font-family="Arial" font-size="12" text-anchor="middle">Chọn "Tạo đơn thuốc"</text>
  <line x1="225" y1="290" x2="225" y2="320" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow to system -->
  <line x1="225" y1="320" x2="470" y2="320" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Hiển thị form đơn thuốc -->
  <rect x="455" y="300" width="210" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="560" y="325" font-family="Arial" font-size="12" text-anchor="middle">Hiển thị form đơn thuốc</text>
  
  <!-- Arrow back -->
  <line x1="455" y1="320" x2="225" y2="320" stroke="#E91E63" stroke-width="2"/>
  <line x1="225" y1="320" x2="225" y2="380" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Tìm kiếm thuốc -->
  <rect x="155" y="380" width="140" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="405" font-family="Arial" font-size="12" text-anchor="middle">Tìm kiếm thuốc</text>
  <line x1="225" y1="420" x2="225" y2="450" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow to system -->
  <line x1="225" y1="450" x2="470" y2="450" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Truy vấn danh mục thuốc -->
  <rect x="455" y="430" width="210" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="560" y="455" font-family="Arial" font-size="12" text-anchor="middle">Truy vấn danh mục thuốc</text>
  
  <!-- Arrow back -->
  <line x1="455" y1="450" x2="225" y2="450" stroke="#E91E63" stroke-width="2"/>
  <line x1="225" y1="450" x2="225" y2="510" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Chọn thuốc và nhập liều dùng -->
  <rect x="80" y="510" width="290" height="80" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="530" font-family="Arial" font-size="11" text-anchor="middle">Chọn thuốc và nhập thông tin:</text>
  <text x="225" y="545" font-family="Arial" font-size="10" text-anchor="middle">- Tên thuốc, hàm lượng</text>
  <text x="225" y="560" font-family="Arial" font-size="10" text-anchor="middle">- Liều dùng, số lần/ngày</text>
  <text x="225" y="575" font-family="Arial" font-size="10" text-anchor="middle">- Số ngày dùng, ghi chú</text>
  <line x1="225" y1="590" x2="225" y2="630" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Thêm thuốc vào đơn -->
  <rect x="150" y="630" width="150" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="655" font-family="Arial" font-size="12" text-anchor="middle">Thêm thuốc vào đơn</text>
  <line x1="225" y1="670" x2="225" y2="720" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Decision - Thêm thuốc khác? -->
  <path d="M 225 720 L 275 770 L 225 820 L 175 770 Z" fill="#FFE082" stroke="#F57C00" stroke-width="2"/>
  <text x="225" y="765" font-family="Arial" font-size="10" text-anchor="middle">Thêm thuốc</text>
  <text x="225" y="780" font-family="Arial" font-size="10" text-anchor="middle">khác?</text>
  
  <!-- Yes path - Loop back -->
  <text x="105" y="775" font-family="Arial" font-size="11" fill="#666">Có</text>
  <line x1="175" y1="770" x2="90" y2="770" stroke="#E91E63" stroke-width="2"/>
  <line x1="90" y1="770" x2="90" y2="400" stroke="#E91E63" stroke-width="2"/>
  <line x1="90" y1="400" x2="155" y2="400" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- No path -->
  <text x="225" y="850" font-family="Arial" font-size="11" text-anchor="middle" fill="#666">Không</text>
  <line x1="225" y1="820" x2="225" y2="880" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Chọn trạng thái đơn -->
  <rect x="135" y="880" width="180" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="905" font-family="Arial" font-size="12" text-anchor="middle">Chọn trạng thái: Nháp/Duyệt</text>
  <line x1="225" y1="920" x2="225" y2="960" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Nhấn Lưu đơn -->
  <rect x="160" y="960" width="130" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="985" font-family="Arial" font-size="12" text-anchor="middle">Nhấn Lưu đơn</text>
  <line x1="225" y1="1000" x2="225" y2="1030" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow to system -->
  <line x1="225" y1="1030" x2="470" y2="1030" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Validate đơn thuốc -->
  <rect x="455" y="1010" width="210" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="560" y="1035" font-family="Arial" font-size="12" text-anchor="middle">Validate đơn thuốc</text>
  <line x1="560" y1="1050" x2="560" y2="1100" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Decision - Hợp lệ? -->
  <path d="M 560 1100 L 610 1150 L 560 1200 L 510 1150 Z" fill="#FFE082" stroke="#F57C00" stroke-width="2"/>
  <text x="560" y="1145" font-family="Arial" font-size="10" text-anchor="middle">Dữ liệu</text>
  <text x="560" y="1160" font-family="Arial" font-size="10" text-anchor="middle">hợp lệ?</text>
  
  <!-- No path -->
  <text x="485" y="1155" font-family="Arial" font-size="11" fill="#666">Không</text>
  <line x1="510" y1="1150" x2="430" y2="1150" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Hiển thị lỗi -->
  <rect x="370" y="1130" width="60" height="60" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="400" y="1150" font-family="Arial" font-size="9" text-anchor="middle">Hiển thị</text>
  <text x="400" y="1163" font-family="Arial" font-size="9" text-anchor="middle">thông báo</text>
  <text x="400" y="1176" font-family="Arial" font-size="9" text-anchor="middle">lỗi</text>
  
  <!-- Loop back -->
  <line x1="400" y1="1130" x2="400" y2="550" stroke="#E91E63" stroke-width="2"/>
  <line x1="400" y1="550" x2="370" y2="550" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Yes path -->
  <text x="640" y="1155" font-family="Arial" font-size="11" fill="#666">Có</text>
  <line x1="610" y1="1150" x2="680" y2="1150" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Lưu đơn vào CSDL -->
  <rect x="680" y="1120" width="60" height="80" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="710" y="1145" font-family="Arial" font-size="9" text-anchor="middle">Lưu đơn</text>
  <text x="710" y="1158" font-family="Arial" font-size="9" text-anchor="middle">vào CSDL</text>
  <text x="710" y="1171" font-family="Arial" font-size="9" text-anchor="middle">&</text>
  <text x="710" y="1184" font-family="Arial" font-size="9" text-anchor="middle">gửi Dược sĩ</text>
  
  <!-- End node -->
  <circle cx="710" cy="1220" r="12" fill="#000"/>
  <circle cx="710" cy="1220" r="8" fill="#fff"/>
  <line x1="710" y1="1200" x2="710" y2="1208" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#E91E63" />
    </marker>
  </defs>
</svg>