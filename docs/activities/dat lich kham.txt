<svg viewBox="0 0 800 1400" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="400" y="30" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">
    Biểu đồ hoạt động Đặt lịch khám bệnh
  </text>
  
  <!-- Swimlanes -->
  <rect x="50" y="60" width="700" height="1280" fill="none" stroke="#333" stroke-width="2"/>
  <line x1="400" y1="60" x2="400" y2="1340" stroke="#333" stroke-width="2"/>
  
  <!-- Swimlane Headers -->
  <rect x="50" y="60" width="350" height="40" fill="#f0f0f0" stroke="#333" stroke-width="1"/>
  <rect x="400" y="60" width="350" height="40" fill="#f0f0f0" stroke="#333" stroke-width="1"/>
  
  <text x="225" y="85" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Bệnh nhân</text>
  <text x="575" y="85" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Hệ thống</text>
  
  <!-- Start node -->
  <circle cx="225" cy="130" r="12" fill="#000"/>
  <line x1="225" y1="142" x2="225" y2="170" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Đăng nhập -->
  <rect x="155" y="170" width="140" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="195" font-family="Arial" font-size="12" text-anchor="middle">Đăng nhập</text>
  <line x1="225" y1="210" x2="225" y2="240" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Truy cập đặt lịch -->
  <rect x="140" y="240" width="170" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="265" font-family="Arial" font-size="12" text-anchor="middle">Truy cập đặt lịch</text>
  <line x1="225" y1="280" x2="225" y2="310" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow to system -->
  <line x1="225" y1="310" x2="470" y2="310" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Thực hiện chuyên đổi -->
  <rect x="455" y="290" width="190" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="550" y="315" font-family="Arial" font-size="12" text-anchor="middle">Hiển thị danh sách chuyên khoa</text>
  
  <!-- Arrow back -->
  <line x1="455" y1="310" x2="225" y2="310" stroke="#E91E63" stroke-width="2"/>
  <line x1="225" y1="310" x2="225" y2="370" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Chọn bác sĩ -->
  <rect x="160" y="370" width="130" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="395" font-family="Arial" font-size="12" text-anchor="middle">Chọn bác sĩ</text>
  <line x1="225" y1="410" x2="225" y2="440" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow to system -->
  <line x1="225" y1="440" x2="470" y2="440" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Truy xuất dữ liệu thống tin bác sĩ -->
  <rect x="430" y="420" width="250" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="555" y="445" font-family="Arial" font-size="12" text-anchor="middle">Truy xuất thông tin lịch làm việc bác sĩ</text>
  
  <!-- Arrow back -->
  <line x1="430" y1="440" x2="225" y2="440" stroke="#E91E63" stroke-width="2"/>
  <line x1="225" y1="440" x2="225" y2="500" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Chọn ngày và ca của bác sĩ -->
  <rect x="110" y="500" width="230" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="525" font-family="Arial" font-size="12" text-anchor="middle">Chọn ngày và timeslot trống</text>
  <line x1="225" y1="540" x2="225" y2="570" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow to system -->
  <line x1="225" y1="570" x2="470" y2="570" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Xuất mẫu điền thống tin bệnh nhân -->
  <rect x="430" y="550" width="250" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="555" y="575" font-family="Arial" font-size="12" text-anchor="middle">Hiển thị form điền thông tin bệnh nhân</text>
  
  <!-- Arrow back -->
  <line x1="430" y1="570" x2="225" y2="570" stroke="#E91E63" stroke-width="2"/>
  <line x1="225" y1="570" x2="225" y2="630" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Điền thống tin cá nhân -->
  <rect x="100" y="630" width="250" height="60" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="650" font-family="Arial" font-size="11" text-anchor="middle">Điền thông tin cá nhân:</text>
  <text x="225" y="665" font-family="Arial" font-size="10" text-anchor="middle">Họ tên, SĐT, Email, Lý do khám,</text>
  <text x="225" y="680" font-family="Arial" font-size="10" text-anchor="middle">Ghi chú (nếu có)</text>
  <line x1="225" y1="690" x2="225" y2="730" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Xác nhận -->
  <rect x="165" y="730" width="120" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="225" y="755" font-family="Arial" font-size="12" text-anchor="middle">Xác nhận đặt lịch</text>
  <line x1="225" y1="770" x2="225" y2="800" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow to system -->
  <line x1="225" y1="800" x2="510" y2="800" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Decision diamond - Kiểm tra -->
  <path d="M 560 780 L 600 820 L 560 860 L 520 820 Z" fill="#FFE082" stroke="#F57C00" stroke-width="2"/>
  <text x="560" y="825" font-family="Arial" font-size="11" text-anchor="middle">Kiểm tra</text>
  
  <!-- No path -->
  <text x="485" y="825" font-family="Arial" font-size="11" fill="#666">Không hợp lệ</text>
  <line x1="520" y1="820" x2="430" y2="820" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Hiển thị lỗi -->
  <rect x="370" y="800" width="60" height="60" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="400" y="822" font-family="Arial" font-size="9" text-anchor="middle">Hiển thị</text>
  <text x="400" y="835" font-family="Arial" font-size="9" text-anchor="middle">thông báo</text>
  <text x="400" y="848" font-family="Arial" font-size="9" text-anchor="middle">lỗi</text>
  
  <!-- Loop back -->
  <line x1="400" y1="800" x2="400" y2="660" stroke="#E91E63" stroke-width="2"/>
  <line x1="400" y1="660" x2="350" y2="660" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Yes path -->
  <text x="560" y="890" font-family="Arial" font-size="11" text-anchor="middle" fill="#666">Hợp lệ</text>
  <line x1="560" y1="860" x2="560" y2="920" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Kiểm tra timeslot còn trống -->
  <rect x="440" y="920" width="240" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="560" y="945" font-family="Arial" font-size="12" text-anchor="middle">Kiểm tra timeslot còn trống</text>
  <line x1="560" y1="960" x2="560" y2="1010" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Decision - Timeslot còn trống? -->
  <path d="M 560 1010 L 610 1060 L 560 1110 L 510 1060 Z" fill="#FFE082" stroke="#F57C00" stroke-width="2"/>
  <text x="560" y="1055" font-family="Arial" font-size="10" text-anchor="middle">Timeslot</text>
  <text x="560" y="1070" font-family="Arial" font-size="10" text-anchor="middle">còn trống?</text>
  
  <!-- No path -->
  <text x="640" y="1065" font-family="Arial" font-size="11" fill="#666">Không</text>
  <line x1="610" y1="1060" x2="680" y2="1060" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Thông báo hết chỗ -->
  <rect x="680" y="1040" width="60" height="60" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="710" y="1060" font-family="Arial" font-size="9" text-anchor="middle">Thông báo</text>
  <text x="710" y="1073" font-family="Arial" font-size="9" text-anchor="middle">hết chỗ,</text>
  <text x="710" y="1086" font-family="Arial" font-size="9" text-anchor="middle">chọn lại</text>
  
  <!-- Loop back to choose time -->
  <line x1="710" y1="1040" x2="710" y2="520" stroke="#E91E63" stroke-width="2"/>
  <line x1="710" y1="520" x2="340" y2="520" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Yes path -->
  <text x="560" y="1140" font-family="Arial" font-size="11" text-anchor="middle" fill="#666">Có</text>
  <line x1="560" y1="1110" x2="560" y2="1170" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Lưu vào csdl -->
  <rect x="465" y="1170" width="190" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="560" y="1195" font-family="Arial" font-size="12" text-anchor="middle">Lưu lịch hẹn vào CSDL</text>
  <line x1="560" y1="1210" x2="560" y2="1250" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Gửi thông báo xác nhận -->
  <rect x="455" y="1250" width="210" height="40" rx="20" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="560" y="1275" font-family="Arial" font-size="12" text-anchor="middle">Gửi email/SMS xác nhận</text>
  
  <!-- End node -->
  <circle cx="560" cy="1310" r="12" fill="#000"/>
  <circle cx="560" cy="1310" r="8" fill="#fff"/>
  <line x1="560" y1="1290" x2="560" y2="1298" stroke="#E91E63" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#E91E63" />
    </marker>
  </defs>
</svg>